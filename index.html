<!DOCTYPE html>
<html lang=en-us>
<head>
<meta charset=utf-8><meta content="text/html; charset=utf-8" http-equiv=Content-Type>
<title>OCCT Draw Harness</title>
</head>
<body>

  <canvas id=occViewerCanvas oncontextmenu=event.preventDefault() tabindex=-1 style="border:0 none;background-color:#000" width="409" height="409"></canvas>

  <hr>
  <textarea id="commandRoRun">pload all</textarea>
  <button id="runCommand">run</button>
  <hr>
  <textarea id="commandExecutionResults"></textarea>
  <hr>
  

<script>
  let wasmModule;
  async function loadWasmModule() {
    try {
      const response = await fetch('wasm32-pthread/DRAWEXE.wasm');
      const buffer = await response.arrayBuffer();
      const module = await WebAssembly.compile(buffer);
      const imports = {}; // Add an empty imports object
      const instance = await WebAssembly.instantiate(module, imports);
      wasmModule = instance.exports;
    } catch (error) {
      console.error('Error loading WebAssembly module:', error);
    }
  }

  document.getElementById('runCommand').addEventListener('click', async () => {
    if (!wasmModule) {
      await loadWasmModule();
    }
    const command = document.getElementById('commandRoRun').value;
    const result = wasmModule.executeCommand(command);
    document.getElementById('commandExecutionResults').value = result;
  });
</script>

</body>
</html>
